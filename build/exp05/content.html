<!-- This file needs to be edited by the lab developer to suit
the requirements of their lab in particular.-->

<!-- Add class="default" to include any element as it is
specified in default.html. 
Do not include class="default" to the elements that you want to
edit -->

<!DOCTYPE html>
<html>
<head></head>
<body>

<div id="experiment"> <!-- The Experiment Document Container-->

  <!-- The lab Header contains the logo and the name of the lab,
  usually displayed on the top of the page-->

  <header id="experiment-header" class="default">
  
    <div id="experiment-header-logo" class="logo">
      <!-- Enclose the logo image of your lab or write it in 
      text
      <img src="../images/logo.jpg" />
	-->
    </div>

    <div id="experiment-header-heading" class="heading">
      <!-- Write the name of your lab and link it to the home 
      page of your lab (h1 tag is preferred while writing your 
      lab name)-->
      <a href="../index.html">Speech Signal Processing Virtual Lab</a>	
    </div>

    <!-- Add any additional element you want to add to the lab 
    header, For example : Help (Enclosing them with suitable 
    div is recommended)-->

  </header>


  <!-- The lab article is the main content area where all the 
  experiment content sits-->
  <article id="experiment-article">
  
    <!-- The lab article has an header, optional navigational 
    menu, number of sections, an optional sidebar and a closing 
    footer-->
    
      <header id="experiment-article-heading" class="heading">
        <!-- You can add a welcome message or title of the 
        experiment here -->
        Expt-5: Short-Time Spectrum Analysis of Speech
        <!-- Add any additional element if required with proper 
        enclosing-->
      </header>

      <!-- Navigation menu is useful to organize the view of 
      multiple sections inside the article-->
      <nav id="experiment-article-navigation" class="default">
        <ul id="experiment-article-navigation-menu">
          <!-- The menu can be dynamically generated to contain 
          the headings of your sections or instead write the 
          menu items of your choice individually enclosedu in 
          <li> tag as shown below-->
        </ul>
      </nav>

      <!-- All the sections of your lab or experiment can be 
      enclosed together with a div element as shown below-->
      <div id="experiment-article-sections">

        <!-- First section of the article-->
        <section id="experiment-article-section-1">
          
          <div id="experiment-article-section-1-icon" 
          class="icon">
	    <!-- Enclose the icon image of your lab -->
	    <img src="../images/introduction.jpg" />
	  </div>	
          
          <!-- The heading for the section can be enclosed in a 
          div tag. -->
          <div id="experiment-article-section-1-heading" 
          class="heading">
            Objective
          </div>

          <!-- Write the section content inside a paragraph 
          element, You can also include images with <img> tag -->
          <div id="experiment-article-section-1-content" 
          class="content">	
            <p>

	    <!-- PUT CONTENT HERE -->
	  <ul>
	  <li><p>To understand the issues in short-time spectrum analysis of speech signals. </p></li>
<li><p>To study the effect of size of the analysis window (less than one pitch period, one pitch period, two to four pitch periods).</p></li>
<li><p>To study the effect of shape of the analysis window (rectangular, Hamming and Hanning window functions).</p></li>
</ul>
        </div>


      </section>

 


      <section id="experiment-article-section-2">
        
        <div id="experiment-article-section-2-icon" 
        class="icon">
	  <!-- Enclose the icon image of your lab. -->
	  <img src="../images/theory.jpg" />
	</div>
     
        <div id="experiment-article-section-2-heading" 
        class="heading">
          Tutorial
        </div>

        <div id="experiment-article-section-2-content" 
        class="content">
	    <!-- PUT CONTENT HERE -->

<p>
	Due to time varying nature of the vocal tract (VT) system during production of speech, it is necessary to analyse the speech signal to extract the characteristics of the vocal tract system using segments of 10-30 msecs. 
Important characteristics of the VT system can be seen clearly from the spectrum of the signal.
Such an analysis of speech signal over short segments is referred to as short-time spectrum analysis.
The spectrum of a segment of speech is obtained by computing the square of the magnitude of the Discrete Fourier Transform (DFT) of the segment, 
 and it is often displayed as log spectrum in dB.
</p>

<p>
Let \(s[n]\) be the discrete-time discrete-amplitude digital signal obtained by sampling the time-axis and quantizing the amplitude of the continuous time analog signal \(s(t)\).
Let \(w[n]\) be a window function of length \(N\) starting at an arbitrary time instant \(n=0\).
Then the windowed segment of the speech signal is given by
$$
x[n] = s[n] w[n] \qquad(1)
$$
The DFT of \(x[n]\) is given by
$$
X[k]=\sum\limits_{n=0}^{N-1}{x[n]e^{-j\frac{2\pi}{N}nk}} \qquad(2)
$$
The complex DFT spectrum is denoted as
$$
X[k]=|X[k]|e^{j\theta[k]}, \qquad(3)
$$
where \(|X[k]|\) is called the magnitude spectrum, and \(\theta[k]\) is called the phase spectrum.
The magnitude and the phase spectrum can be computed as
$$
|X[k]|=\{X_R^2[k]+X_I^2[k]\}^{1/2}  \qquad(4)
$$
and
$$
\theta[k]=\tan^{-1}{\frac{X_I[k]}{X_R[k]}} \qquad(5)
$$
where \(X_R[k]\) and \(X_I[k]\) denote the real and imaginary parts of the complex DFT spectrum \(X[k]=X_R[k]+jX_I[k]\).

</p>

<p>
Note that only the magnitude of the DFT of the signal segment is considered in this analysis, as features of the VT system are better displayed in the magnitude spectrum. 
The phase spectrum is not analysed in this experiment.
</p>

<p>
	The objective of this experiment is to study the effect of various analysis parameters on the resulting short time spectrum. For this study the pre-stored speech signal for an utterance may be loaded, or a person's speech can be recorded and loaded for analysis. The following studies will be made to observe the effects of size of the window, shape of the window, pitch period in the case of voiced segments on different types of segments such as silence, unvoiced and voiced speech.
	These effects are studied more carefully for voiced segments.
	For analysis, speech signal data can be loaded from a pre-stored file or speech can be recorded  and loaded. The file say ex1.wav can be  loaded by selecting it and pressing the load button. The loaded signal comes out in the 1st display panel. The signal can be played using the play button. 
	A segment of speech can be selected in the fourth button in the selection panel. Once a segment is selected by marking a region, its spectrum can be computed using spectrum button. The selected segment will be displayed in the windowed wave for parts of the lower two panels, and the log spectrum of the segments using minimum required FFT points are displayed on the RHS of the lower two panels. The two panels are given to compare the effects of analysis parameters on the short-time spectrum.
</p>

<p>	
<ol>
<li><p> First let us examine the short time spectral characteristics of 30 ms segment of voiced speech. 
The log spectrum is plotted using the points for DFT (i.e., the choice of NFFT) which is 512 in this case. 
(Note that the log spectrum is displayed for NFFT/2 points covering the desired frequency range of 0 to \(\frac{F_s}{2}\)).</p>
</li>
<li><p> The effect of points using for DFT can be seen by increasing NFFT to 1024 points or higher. 
Note that in this case the DFT points nearly bring out the values missing when lower NFFT value is used. 
Those missing values are seen prominently during the regions of rapid changes in the spectrum (near spectral values). 
Compare the log spectrum for this using 512 NFFT points and using 4096 NFFT points. 
Note that the peaks in the spectrum especially with low frequency correspond to harmonics, in the waveform has two or more pitch periods. 
Note that peaks are not seen in the higher frequency range due to side-lobe leakage of the rectangular window.
</p></li>
<li><p> The effect of shape of the window can be seen by using a rectangular window for the same segment in the lowest (third) panel. Now the log spectrum appears a little smoother compared to rectangular window case. The harmonics are seen better due to smoothing. But the narrow peak is broadened. The effect of smoothing of the envelope can be seen better if NFFT is made large, say NFFT=4096 for both rectangular and Hamming window cases. Note also that the dynamic range of spectrum envelope is large for Hamming window compared to rectangular window.
</p></li>
<li><p> The regular peaks in the envelope correspond to harmonics of the fundamental frequency or pitch frequency. 
The harmonic peaks are smoother in the case of Hamming window when compared to rectangular window.
</p></li>
<li><p> The smoothed spectral envelope over the harmonics correspond to the frequency response of the VT system. 
The peaks of this envelope correspond to resonances or formants of the vocal tract system. 
 <!--Due to effects of windowing (finite duration) and pitch, The spectral envelope due to the VT system response cannot be seen clearly due to windowing effect. -->
</p></li>
<li><p> Now selecting a short (say 3-4 msec) segment of voiced speech, which is less than a pitch period, one can observe the effect of windowing (rectangular or Hamming) 
	for different lengths of DFT, i.e., the value of NFFT.
	Note that here the pitch harmonics are not visible in the spectrum. 
	Also the spectral envelope shows the gross characterstics of the VT response, but not the individual resonance formants, 
	due to poor resolution of the spectrum in the frequency domain caused due to selection of short segment. 
	This shows that the width of the segment decides the resolution of the spectral envelope in the short-time spectral analysis. 
	The layer NFFT values merely help to interpolate the values in between those, obtained for smaller value of NFFT.
</p></li>
<li><p> It is also interesting to compare the effect of size of the window in terms of a voiced segment. 
Observe the spectra of rectangle and Hamming windowed segments for large volume of NFFT. 
The Hamming windowed signal spectrum shows the pitch harmonics better than the rectangle windowed spectrum. 
Note that the rectangle window produces sharper ripple and the side-lobe effects mask the details of the harmonics in the spectrum. 
If only two pitch periods are selected, than the Hamming windowed speech does not show any harmonic information, as the two cycles are not equal in shape due to windowing. 
In all the cases, observe the y-axis scale also for the dynamic range of the log spectrum.
</p></li>
<li><p> The effect of window size, shape and the NFFT on the short-time spectrum can also be observed on segments of unvoiced sounds like fricatives, by selecting a segment of frication in the signal in the first panel.
	Since there are no periodic segments in the waveform, the spectral envelope corresponds to the response of the VT system. Usually, the response has larger values is the middle and higher frequencies compared to the values in the lower frequencies.
	It is difficult to notice any significant differences between spectral envelopes for rectangle and Hanning windowed speech segments, although the overall dynamic range of the spectral envelope is lower for rectangle window due to side-lobe leakage effect. Therefore, it is generally preferable to use a window that tapers off the signal at the ends.
	The size of the window does not have any significant effect, as the spectral envelope for frication have usually broad peaks, and do not have any sharp resonance peaks.
</p></li>
<li><p> Note that if one wants to observe the spectra of two or more different analysis segments (i.e., unvoiced and voiced, or different sizes of the voiced segments), 
	then the spectra can be displayed by opening another browser for each type of segment and comparing the spectra displayed in different browsers.
</p></li>
</p>
        </div>

      </section>


     <!-- Second section of the article-->
      <section id="experiment-article-section-3">
         <div id="experiment-article-section-3-icon" 
        class="icon">
          <!-- Enclose the icon image of your lab. -->
          <img src="../images/procedure.jpg" />
        </div>
  			
        <!-- The heading for the section can be enclosed in a 
        div tag. -->
        <div id="experiment-article-section-3-heading" class="heading">
          Procedure
        </div>

        <!-- Write the section content inside a paragraph 
        element, we can also include images with <img> tag -->
        <div id="experiment-article-section-3-content" class="content">
	    <!-- PUT CONTENT HERE -->
<ul>
<li><p>Select one of the example waveforms and click on the load button.</p></li>
<li><p>Select a short segment of voiced speech using 'Zoom to Selection' button and click on the spectrum button.</p></li>
<li><p>Study the effect of NFFT points on the spectrum.</p></li>
<li><p>Study the effect of windowing by choosing various window functions. </p></li>
<li><p>Recompute the spectrum by selecting different lengths (5 ms, 10 ms and 50 ms) of the speech signal.</p></li>
<li><p>Compare the spectra for two different window shapes using the two spectrum panels provided.</p></li>
<li><p>Study the short-time spectrum for different category of sounds such as fricatives, nasals, semivowels, vowels and stops.</p></li>
<li><p>Write a brief note on the observations. </p></li>
</ul>
        </div>
      </section>


      <section id="experiment-article-section-4">

         <div id="experiment-article-section-4-heading" class="heading">
          Experiment
        </div>

        <div id="experiment-article-section-4-content" class="content">
	    <!-- PUT CONTENT HERE -->
<p>
<!--	<font size=-1> <a href="readme.html">README</a> -->
<i>
<ul>
<!--<li> Note: Pre-recorded signals are sampled at 8KHz (\(F_s = 8000 Hz\)).
    All recordings are sampled at \(F_s = 8000 Hz\).-->
</ul>
<!--
<ol>
<li>Select one of the example waveforms and click on the load button.</li>
<li>Select a short segment of voiced speech and click on the spectrum button.</li>
<li>Study the effect of NFFT points on the spectrum.</li>
<li>Recompute the spectrum by selecting different lengths (5 ms, 10 ms and 50 ms) of the speech signal.</li>
<li>Compare the spectra for two different window shapes using the two spectrum panels provided.</li>
<li>Study the short-time spectrum for different category of sounds such as fricatives, nasals, semivowels, vowels and stops.</li>
</ol>
-->
</i>
</font>

                <applet code=audioTransport/SVLAudioTool.class 
                      archive="media/spectrumAnalysisS.jar"
                      width=800 height=600>
               <param name=foo value="bar">
        Please install the latest version of the Java plugin for your browser. <br>
        </applet>
</p>

        </div>

      </section>

      <section id="experiment-article-section-5">

   <div id="experiment-article-section-2-icon" 
        class="icon">
          <!-- Enclose the icon image of your lab. -->
          <img src="../images/manual.jpg" />
        </div>
  
 
        <div id="experiment-article-section-5-heading" 
        class="heading">
          Observations
        </div>

        <div id="experiment-article-section-5-content" 
        class="content">
	    <!-- PUT CONTENT HERE -->
	    
	    <ul>
<li><p>The size of the window (rectangular in this case) determines the temporal resolution, i.e., 
	our ability to localize (or analyze) the frequency components of as small a time window as possible.</p>
</li><br>
<li><p> Increase in the size of window increases the spectral resolution due to narrower main lobe, 
	but reduces the temporal resolution due to lack of localization of frequency components over the windowed block of the signal, and vice versa. 
	The smaller the window size the more is the averaging or smearing in the spectral domain due to incresed main lobe width.</p>
</li><br>
<li><p> Rectangular window provides the best spectral resolution, as it smears or averages the spectrum least due to a narrow main lobe. 
But distortion of spectrum is high due to side-lobe effect (strong side-lobe). 
Sidelobe attenuation is more with Hamming and Hanning windows, but the main lobe width increases. 
</p></li><br>
<li><p>Voiced speech log spectrum shows clearly the harmonic (source feature) and the formant structure (system feature),
whereas there is no defined structure in the log spectrum of unvoiced speech segment.</p>
</li><br>
</ul>

          </div>

</section>


<section id="experiment-article-section-6">
      
	<div id="experiment-article-section-6-icon" class="icon">
		<img src="../images/quizzes.jpg" />
	</div>

	<div id="experiment-article-section-6-heading" class="heading">
		Assessment
	</div>

	<div id="experiment-article-section-6-content" 	class="content">
	<p>
   	<ol>
			<li><p>What is the need for windowing of the signal?</p></li>
			<li><p>Why rectangular window is not suitable for short-time DFT spectral analysis?</p></li>
			<li><p>Explain the influence of the number of DFT points on the DFT spectrum.</p></li>
			<li><p>What is the effect of the window size on the DFT spectrum?</p></li>
			<li><p>What is the significance of short-time spectral envelope representation of speech?</p></li>
			<li><p>What features of the speech production system can be observed at different window size?</p></li>
			<li><p>What are the source features that can be observed in the short-time DFT spectrum?</p></li>
			<li><p>What vocal tract system characteristics are observed in the short-time DFT spectrum?</p></li>
			<li><p>Why is it difficult to analyze the vocal tract system characteristics from a short-time DFT spectrum?</p></li>
		</ol>   	
   </p>     	
 	</div>

</section>

 <!--       <section id="experiment-article-section-7">
	  
          <div id="experiment-article-section-7-icon" 
          class="icon">
	    <img src="../images/procedure.jpg" />
	  </div>
	
          <div id="experiment-article-section-7-heading" 
          class="heading">
	    Assignments
	  </div>
	
          <div id="experiment-article-section-7-content" 
          class="content">

	  </div>
	
        </section>
-->		
  

<section id="experiment-article-section-9">
   
	<div id="experiment-article-section-9-icon"  class="icon">
	    <!-- Enclose the icon image of your lab.-->
		<img src="../images/readings.jpg" />
	</div>


	<div id="experiment-article-section-9-heading"  class="heading">
        References
	</div>

	<div id="experiment-article-section-9-content"  class="content">
		<ul>
			<li><p> <i>Digital Processing of Speech Signals</i>, L.R. Rabiner and L.R. Schafer, Chapter 6</p></li>
			<li><p> <i>Discrete-Time Speech Signal Processing</i>, Thomas F. Quatieri , Chapter 7</p></li>
		</ul>     
     
   </div>

        </section>

	</div>


    <!-- An article can have a sidebar that contain related 
    links and additional material (however it is kept optional 
    at this moment) -->
    <aside id="lab-article-sidebar" class="default">
      <!-- put the content that you want to appear in the 
      sidebar -->	
    </aside>


    <!-- Article footer can display related content and 
    additional links -->						
    <footer id="lab-article-footer" class="default">
      <!-- Put the content that you want to appear here -->
    </footer>

  </article>


  <!-- Links to other labs, about us page can be kept the lab 
  footer-->
  <footer id="lab-footer" class="default">
    <!-- Put the content here-->
  </footer>

<footer id="lab-header" class="heading">
    <!-- Put the content here-->
    <div id="lab-header-heading" class="heading">
    <!-- Write the name of your lab and link it to the home page
    of your lab. -->
        <center>
        <table><tr>
                <td><a href="http://speech.iiit.ac.in/" target=_blank><font size=-3>Developed at the Speech and Vision Lab, IIIT Hyderabad</font></a></td>
        </tr></table>
        </center>
    </div>


  </footer>


</div>		

</body>
</html>
<script type=text/javascript src=../js/MathJax/MathJax.js?config=default></script>
